<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Crypto Cipher Challenge</title>
<style>
  body { 
    font-family: 'Segoe UI', sans-serif; 
    background: #0f172a; 
    color: #f0f0f0; 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    min-height: 100vh; 
    margin: 0; 
    flex-direction: column;
  }

  .game-container {
    width: 90vw;
    max-width: 600px;
    background: #1e293b;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.5);
    text-align: center;
    position: relative;
    overflow: hidden;
  }

  h1 { font-size: 2rem; margin-bottom: 10px; }
  h2 { margin: 15px 0; }

  input, button { 
    padding: 12px; 
    font-size: 1rem; 
    margin: 10px 5px; 
    border-radius: 8px;
    border: none;
  }

  button { background: #2563eb; color: white; cursor: pointer; }
  button:hover { background: #1d4ed8; }

  .correct { color: #22c55e; font-weight: bold; }
  .wrong { color: #ef4444; font-weight: bold; }

  /* Animation container */
  .cyber-animation {
    width: 100px;
    margin: 20px auto;
  }

  /* QR code styling */
  #qrcode {
    margin-top: 20px;
  }

  /* Simple bounce animation */
  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-15px); }
  }

  .animated-icon {
    width: 80px;
    animation: bounce 1s infinite;
  }
</style>
</head>
<body>

<div class="game-container">
  <h1>üîê Crypto Cipher Challenge</h1>

  <!-- Cybersecurity cartoon animation -->
  <div class="cyber-animation">
    <img class="animated-icon" src="https://upload.wikimedia.org/wikipedia/commons/6/6f/Padlock_icon.svg" alt="Cybersecurity Lock">
  </div>

  <p>Solve the Caesar Cipher to unlock the secret message!</p>

  <div id="level-container">
    <h2>Level <span id="level-number">1</span></h2>
    <p id="cipher-text">Loading...</p>
    <input type="text" id="guess" placeholder="Type your guess here">
    <button onclick="checkGuess()">Submit</button>
    <p id="feedback"></p>
  </div>

  <!-- QR Code -->
  <div id="qrcode"></div>
</div>

<!-- QR code library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<script>
const messages = [
  "HELLO WORLD",
  "CRYPTOGRAPHY IS FUN",
  "KEEP YOUR SECRETS SAFE",
  "SECURITY FIRST",
  "ENCRYPT AND DECRYPT"
];

let level = 0;
let shift = 3; // initial Caesar shift

function caesarEncrypt(text, shift) {
  return text.split('').map(c => {
    if(c.match(/[A-Z]/)) {
      return String.fromCharCode((c.charCodeAt(0) - 65 + shift) % 26 + 65);
    } else if(c.match(/[a-z]/)) {
      return String.fromCharCode((c.charCodeAt(0) - 97 + shift) % 26 + 97);
    } else {
      return c;
    }
  }).join('');
}

function loadLevel() {
  const cipherText = caesarEncrypt(messages[level], shift + level); // increase shift each level
  document.getElementById('cipher-text').innerText = cipherText;
  document.getElementById('guess').value = "";
  document.getElementById('feedback').innerText = "";
  document.getElementById('level-number').innerText = level + 1;
}

function checkGuess() {
  const userGuess = document.getElementById('guess').value.toUpperCase().trim();
  if(userGuess === messages[level]) {
    document.getElementById('feedback').innerText = "‚úÖ Correct!";
    document.getElementById('feedback').className = "correct";
    level++;
    if(level >= messages.length){
      alert("üéâ Congratulations! You solved all cipher challenges!");
      level = 0; // restart game
    }
    setTimeout(loadLevel, 1000);
  } else {
    document.getElementById('feedback').innerText = "‚ùå Try again!";
    document.getElementById('feedback').className = "wrong";
  }
}

// Generate QR code for this page
new QRCode(document.getElementById("qrcode"), {
  text: window.location.href,
  width: 120,
  height: 120
});

window.onload = loadLevel;
</script>

</body>
</html>
