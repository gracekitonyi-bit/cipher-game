<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Crypto Cipher Challenge</title>
<style>
  body { 
    font-family: 'Segoe UI', sans-serif; 
    background: #0f172a; 
    color: #f0f0f0; 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    min-height: 100vh; 
    margin: 0; 
    flex-direction: column;
  }

  .game-container {
    width: 90vw;
    max-width: 600px;
    background: #1e293b;
    padding: 20px 30px;
    border-radius: 15px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.5);
    text-align: center;
    position: relative;
    overflow: hidden;
  }

  iframe {
    width: 100%;
    height: 200px;
    border-radius: 10px;
    margin-bottom: 20px;
  }

  h1 { font-size: 2rem; margin-bottom: 10px; }
  h2 { margin: 15px 0; }

  input, button { 
    padding: 12px; 
    font-size: 1rem; 
    margin: 10px 5px; 
    border-radius: 8px;
    border: none;
  }

  button { background: #2563eb; color: white; cursor: pointer; }
  button:hover { background: #1d4ed8; }

  .correct { color: #22c55e; font-weight: bold; }
  .wrong { color: #ef4444; font-weight: bold; }

  .cyber-animation {
    width: 100px;
    margin: 20px auto;
  }

  #qrcode {
    margin-top: 20px;
  }

  /* Bounce animation for icon */
  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-15px); }
  }

  .animated-icon { width: 80px; animation: bounce 1s infinite; }

  /* Floating comment animation */
  .comment {
    position: absolute;
    font-size: 1.5rem;
    font-weight: bold;
    color: #ffd700;
    animation: floatUp 1.5s forwards;
    pointer-events: none;
    text-shadow: 1px 1px 5px #000;
  }

  @keyframes floatUp {
    0% { opacity: 1; transform: translateY(0); }
    100% { opacity: 0; transform: translateY(-50px); }
  }
</style>
</head>
<body>

<div class="game-container">
  <!-- Embedded YouTube video -->
  <iframe src="https://www.youtube.com/embed/00hpRjfbM0A?autoplay=1&mute=1&loop=1&playlist=00hpRjfbM0A" 
          frameborder="0" allow="autoplay; encrypted-media" allowfullscreen>
  </iframe>

  <h1>üîê Crypto Cipher Challenge</h1>

  <!-- Cybersecurity cartoon -->
  <div class="cyber-animation">
    <img class="animated-icon" src="https://upload.wikimedia.org/wikipedia/commons/6/6f/Padlock_icon.svg" alt="Cybersecurity Lock">
  </div>

  <p>Solve the Caesar Cipher to unlock the secret message!</p>

  <div id="level-container">
    <h2>Level <span id="level-number">1</span></h2>
    <p id="cipher-text">Loading...</p>
    <input type="text" id="guess" placeholder="Type your guess here">
    <button onclick="checkGuess()">Submit</button>
    <p id="feedback"></p>
  </div>

  <div id="qrcode"></div>
</div>

<!-- Audio files -->
<audio id="correct-sound" src="https://www.soundjay.com/buttons/sounds/button-3.mp3"></audio>
<audio id="wrong-sound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>

<!-- QR code library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<script>
const messages = [
  "HELLO WORLD",
  "CRYPTOGRAPHY IS FUN",
  "KEEP YOUR SECRETS SAFE",
  "SECURITY FIRST",
  "ENCRYPT AND DECRYPT"
];

let level = 0;
let shift = 3; // initial Caesar shift

function caesarEncrypt(text, shift) {
  return text.split('').map(c => {
    if(c.match(/[A-Z]/)) {
      return String.fromCharCode((c.charCodeAt(0) - 65 + shift) % 26 + 65);
    } else if(c.match(/[a-z]/)) {
      return String.fromCharCode((c.charCodeAt(0) - 97 + shift) % 26 + 97);
    } else {
      return c;
    }
  }).join('');
}

function loadLevel() {
  const cipherText = caesarEncrypt(messages[level], shift + level); 
  document.getElementById('cipher-text').innerText = cipherText;
  document.getElementById('guess').value = "";
  document.getElementById('feedback').innerText = "";
  document.getElementById('level-number').innerText = level + 1;
}

function showComment(text) {
  const comment = document.createElement('div');
  comment.className = 'comment';
  comment.style.left = `${Math.random() * 70 + 15}%`;
  comment.innerText = text;
  document.querySelector('.game-container').appendChild(comment);
  setTimeout(() => comment.remove(), 1500);
}

function checkGuess() {
  const userGuess = document.getElementById('guess').value.toUpperCase().trim();
  if(userGuess === messages[level]) {
    document.getElementById('feedback').innerText = "‚úÖ Correct!";
    document.getElementById('feedback').className = "correct";
    document.getElementById('correct-sound').play();
    const comments = ["Excellent!", "Well done!", "Good!", "Amazing!"];
    showComment(comments[Math.floor(Math.random() * comments.length)]);
    level++;
    if(level >= messages.length){
      alert("üéâ Congratulations! You solved all cipher challenges!");
      level = 0; 
    }
    setTimeout(loadLevel, 1000);
  } else {
    document.getElementById('feedback').innerText = "‚ùå Try again!";
    document.getElementById('feedback').className = "wrong";
    document.getElementById('wrong-sound').play();
  }
}

// Generate QR code for this page
new QRCode(document.getElementById("qrcode"), {
  text: window.location.href,
  width: 120,
  height: 120
});

window.onload = loadLevel;
</script>

</body>
</html>
